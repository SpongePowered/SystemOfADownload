play.modules.enabled += org.spongepowered.synchronizer.SynchronizerModule

db.default {
    driver = "org.postgresql.Driver"
    url = "jdbc:postgresql://localhost:5432/default"
    url = ${?POSTGRES_URL}
    username = admin
    username = ${?POSTGRES_USERNAME}
    password = password
    password = ${?POSTGRES_PASSWORD}
}

jdbc-defaults.slick.profile = "slick.jdbc.PostgresProfile$"

akka.serialization.jackson {
    jackson-modules += "io.vavr.jackson.datatype.VavrModule"
}

akka {
    extensions = ${akka.extensions} [
        "org.spongepowered.synchronizer.actor.AssetSettingsExtension",
        "org.spongepowered.synchronizer.resync.ResyncExtension",
        "org.spongepowered.synchronizer.SynchronizationExtension",
        "org.spongepowered.synchronizer.actor.ArtifactSyncExtension"
    ]
}
asset-retrieval-dispatcher {
    type = Dispatcher
    executor = "thread-pool-executor"
    thread-pool-executor {
        fixed-pool-size = 16
    }
    throughput = 1
}
systemofadownload.synchronizer {
    version-sync {
        pool-size = 1
        interval = "300s"
        delay = "60s"
    }
    reactive-sync {
        pool-size = 1
        parallelism = 1
        time-out = "1h"
    }
    asset {
        pool-size = 1
        parallelism = 1
        initial-backoff = "1m"
        maximum-backoff = "600m"
        backoff-factor = 10
        time-out = "1h"
    }
    timed-sync {

    }
    worker {
        assets {
            repository = "https://repo.spongepowered.org"
            timeout = "1h"
            retry = 3
            files-to-index = ["jar", "pom"]
            pool-size = 1
        }
        resync {
            repository = "https://repo.spongepowered.org/repository/maven-public/"
            timeout = "1h"
            retry = 1
            agent-name = "SystemOfADownload-Synchronizer"
        }
        version-registration {
            parallelism = 1
            fan-out-parallelism = 1
            pool-size = 1
            time-out = "1h"
            registration-time-out = "90000s"
        }
    }

}
