
akka {
    actor {
        provider = "cluster"
        serialization-bindings {
            "org.spongepowered.downloads.akka.AkkaSerializable" = jackson-json
        }
    }
    management.cluster {
        bootstrap {
            contact-point-discovery {
                discovery-method = config
                service-name = "service1"
                port-name = "http"
                required-contact-point-nr = 0
            }
        }
    }
    cluster {
        roles = ["Master"]
        sharding {
            role = "Master"
        }

    }

}
akka.extensions = ["akka.management.cluster.bootstrap.ClusterBootstrap"]
akka.persistence.r2dbc.connection-factory = ${akka.persistence.r2dbc.postgres}
akka.persistence.journal.plugin = "akka.persistence.r2dbc.journal"
akka.persistence.snapshot-store.plugin = "akka.persistence.r2dbc.snapshot"
akka.persistence.state.plugin = "akka.persistence.r2dbc.state"

akka.persistence.r2dbc.connection-factory {
    driver = "tc"
    url = "r2dbc:tc:postgresql:///postgres?TC_IMAGE_TAG=15-alpine"
    database = "testdb"
    user = "testuser"
    password = "testpassword"
    protocol = "postgresql"
    # ssl {
    #   enabled = on
    #   mode = "VERIFY_CA"
    #   root-cert = "/path/db_root.crt"
    # }
}
